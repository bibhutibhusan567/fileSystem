{"version":3,"sources":["Components/FileList.js","App.js","index.js"],"names":["FileList","props","Table","list","map","file","idx","fileName","date","time","Button","onClick","downloadHandler","deleteHandler","id","App","useState","setFile","setList","error","setError","message","setMessage","useEffect","fetch","then","res","json","console","log","className","onSubmit","e","preventDefault","undefined","formdata","FormData","append","name","method","body","type","onChange","target","files","value","blob","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","appendChild","click","parentNode","removeChild","ReactDOM","render","StrictMode","getElementById"],"mappings":"kQAEe,SAASA,EAASC,GAC/B,OACE,eAACC,EAAA,EAAD,WACE,gCACE,+BACE,mCACA,2CACA,sCACA,sCACA,uBACA,4BAGJ,gCACGD,EAAME,KAAKC,KAAI,SAACC,EAAMC,GACrB,OACE,+BACE,6BAAKA,EAAM,IACX,6BAAKD,EAAKE,WACV,6BAAKF,EAAKG,OACV,6BAAKH,EAAKI,OACV,6BAAI,cAACC,EAAA,EAAD,CAAQC,QAAS,kBAAIV,EAAMW,gBAAgBP,EAAKE,WAAhD,wBACJ,6BAAI,cAACG,EAAA,EAAD,CAAQC,QAAS,kBAAIV,EAAMY,cAAcR,EAAKS,KAA9C,wBANGR,WC+FNS,MA7Gf,WAAgB,IAAD,EACWC,qBADX,mBACNX,EADM,KACAY,EADA,OAEWD,mBAAS,IAFpB,mBAENb,EAFM,KAEAe,EAFA,OAGaF,qBAHb,mBAGNG,EAHM,KAGCC,EAHD,OAIiBJ,qBAJjB,mBAINK,EAJM,KAIGC,EAJH,KAqFb,OA/EAC,qBAAU,WACRC,MAAM,SACHC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACC,GACDA,EAAIP,MACNC,EAASM,EAAIP,QAGbC,IACAQ,QAAQC,IAAIH,GACZR,EAAQQ,SAGb,IAmED,sBAAKI,UAAU,MAAf,UACE,uBAAMC,SAlEK,SAACC,GAEd,GADAA,EAAEC,sBACWC,IAAT7B,EAAJ,CAIE,IAAM8B,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQhC,GACxB8B,EAASE,OAAO,WAAYhC,EAAKiC,MAEjCd,MAAM,WAAY,CAChBe,OAAQ,OACRC,KAAML,IAELV,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACC,GACDA,EAAIP,MACNC,EAASM,EAAIP,QAEbC,IACAE,EAAWI,EAAIL,SACfH,EAAQQ,EAAIc,eAlBlBpB,EAAS,mCA+DT,UACE,uBAAOqB,KAAK,OAAOH,KAAK,OAAOI,SAPrB,SAACV,GACff,EAAQe,EAAEW,OAAOC,MAAM,OAOnB,uBAAOH,KAAK,SAASI,MAAM,cAG7B,uBACC1B,EACC,qBAAKW,UAAU,QAAf,SAAwBX,IAExB,qBAAKW,UAAU,UAAf,SAA0BT,IAE5B,uBACA,uBACA,cAACrB,EAAD,CACEG,KAAMA,EACNS,gBAtDkB,SAACL,GACvBiB,MAAM,aAAD,OAAcjB,IAEhBkB,MAAK,SAACC,GAAD,OAASA,EAAIoB,UAClBrB,MAAK,SAACqB,GAEL,IAAMC,EAAMC,OAAOC,IAAIC,gBAAgB,IAAIC,KAAK,CAACL,KAC3CM,EAAOC,SAASC,cAAc,KACpCF,EAAKG,KAAOR,EACZK,EAAKI,aAAa,WAAYjD,GAC9B8C,SAASb,KAAKiB,YAAYL,GAC1BA,EAAKM,QACLN,EAAKO,WAAWC,YAAYR,OA2C5BvC,cAvCgB,SAACC,GAErBU,MAAM,WAAD,OAAYV,GAAM,CACrByB,OAAQ,WAEPd,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACC,GACDA,EAAIP,MACNC,EAASM,EAAIP,QAEbC,IACAF,EAAQQ,EAAIc,MACZlB,EAAWI,EAAIL,oB,MC1EzBwC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFV,SAASW,eAAe,W","file":"static/js/main.b133c501.chunk.js","sourcesContent":["import { Table,Button } from \"reactstrap\";\n\nexport default function FileList(props) {\n  return (\n    <Table>\n      <thead>\n        <tr>\n          <th>#</th>\n          <th>File Name</th>\n          <th>Date</th>\n          <th>Time</th>\n          <th></th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        {props.list.map((file, idx) => {\n          return (\n            <tr key={idx}>\n              <th>{idx + 1}</th>\n              <td>{file.fileName}</td>\n              <td>{file.date}</td>\n              <td>{file.time}</td>\n              <td><Button onClick={()=>props.downloadHandler(file.fileName)}>Download</Button></td>\n              <td><Button onClick={()=>props.deleteHandler(file.id)}>Delete</Button></td>\n\n            </tr>\n          );\n        })}\n      </tbody>\n    </Table>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport FileList from \"./Components/FileList\";\n\nfunction App() {\n  const [file, setFile] = useState();\n  const [list, setList] = useState([]);\n  const [error, setError] = useState();\n  const [message, setMessage] = useState();\n\n  useEffect(() => {\n    fetch(`/data`)\n      .then((res) => res.json())\n      .then((res) => {\n        if (res.error) {\n          setError(res.error);\n          return;\n        } else {\n          setError();\n          console.log(res);\n          setList(res);\n        }\n      });\n  }, []);\n\n  const submit = (e) => {\n    e.preventDefault();\n    if (file === undefined) {\n      setError(\"Please select a file to upload\");\n      return;\n    } else {\n      const formdata = new FormData();\n      formdata.append(\"file\", file);\n      formdata.append(\"fileName\", file.name);\n\n      fetch(`/newfile`, {\n        method: \"post\",\n        body: formdata,\n      })\n        .then((res) => res.json())\n        .then((res) => {\n          if (res.error) {\n            setError(res.error);\n          } else {\n            setError();\n            setMessage(res.message);\n            setList(res.body);\n          }\n        });\n    }\n  };\n\n  const downloadHandler = (fileName) => {\n    fetch(`/download/${fileName}`)\n      // 1. Convert the data into 'blob'\n      .then((res) => res.blob())\n      .then((blob) => {\n        // 2. Create blob link to download\n        const url = window.URL.createObjectURL(new Blob([blob]));\n        const link = document.createElement(\"a\");\n        link.href = url;\n        link.setAttribute(\"download\", fileName); // 3. Append to html page\n        document.body.appendChild(link); // 4. Force download\n        link.click(); // 5. Clean up and remove the link\n        link.parentNode.removeChild(link);\n      });\n  };\n\n  const deleteHandler = (id) => {\n    // console.log(id);\n    fetch(`/delete/${id}`, {\n      method: \"delete\",\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        if (res.error) {\n          setError(res.error);\n        } else {\n          setError();\n          setList(res.body);\n          setMessage(res.message);\n        }\n      });\n  };\n\n  const getData = (e) => {\n    setFile(e.target.files[0]);\n  };\n\n  return (\n    <div className=\"App\">\n      <form onSubmit={submit}>\n        <input type=\"file\" name=\"file\" onChange={getData} />\n        <input type=\"submit\" value=\"upload\" />\n      </form>\n\n      <br />\n      {error ? (\n        <div className=\"error\">{error}</div>\n      ) : (\n        <div className=\"success\">{message}</div>\n      )}\n      <br />\n      <br />\n      <FileList\n        list={list}\n        downloadHandler={downloadHandler}\n        deleteHandler={deleteHandler}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}